\documentclass{article}
\usepackage{graphicx} % Required for inserting images
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{listings}
\usepackage{multicol}


\title{EP2}
\author{Štefan Slavkovský}
\date{April 2024}

\begin{document}

\maketitle
{
    \centering
    \section*{Rock and Ruck}
    \par
}

Central-finite-curve is experiencing outbreak
of interdimensional trumpetic plague (highly infectious variant of bubonic plague).
Trumpetic plague is really dangerous because it can spread between neighboring dimensions
(dimension that are close on central-finite-curve) without portal gun.
There is no good test for trumpetic plague, so Ricks can
not risk being in neighboring dimensions.

Two Ricks: Rock and Ruck need to travel across dimension
to acquire Kalaxian Crystals for their 'research'. Ricks can
of course teleport between any two dimensions using portal-gun. They can not be in neighboring dimensions, because they could get infected.
Rock and Ruck are busy doing more important work, so they tasked you to decide if their travel is possible.

They give you map of their local central-finite-curve describing which dimensions are neighboring. Their local central-finite-curve has $n$ dimensions.
They also give you $q$ queries of starting and ending dimensions.

Map consists of:
\begin{itemize}
    \item first line: $n~m$, where $2 \leqslant n \leqslant 10^6$, $0 \leqslant m \leqslant 10^6$
    \item $m$ lines: $i~j$, meaning dimensions $0 \leqslant i < n$ and $0 \leqslant j < n$ are neighboring (dimensions are numbered from 0)
    \item one line: $q$, where $0 < q \leqslant 10^6$
    \item $q$ lines: $a_0~b_0~a_k~b_k$, where $0 \leqslant a_0, b_0, a_k, b_k < n$
\end{itemize}

For each of $q$ lines output 'YES'/'NO'.

You need to output 'YES' if there exists sequence:
\begin{equation*}
    \{a_0, b_0\} \to
    \cdots \to
    \{a_i, b_i\} \to
    \{a_{i+1}, b_{i+1}\} \to
    \cdots \to
    \{a_k, b_k\}
\end{equation*}

Such that $(\forall i < k )(|\{a_i, b_i\} \cap \{a_{i+1}, b_{i+1}\}| = 1)$,
meaning that only one Rick goes through portal at once.

Also $(\forall i \leqslant k)(a_i, b_i)$ must not be neighboring nor same dimension, so that Rick can not infect each other.

You can assume that starting and final positions are not neighboring. Note that we do \textbf{not} care in what particular dimension do Ricks arrive. Rock can arrive to $a_k$ and Ruck to $b_k$, or Rock to $b_k$ and Ruck $a_k$. (There is harder version of problem where destination can not be swapped.)

\newpage

\begin{multicols}{2}

\textbf{Sample input 1:}
\begin{lstlisting}
8 15
0 1
0 2
0 4
0 5
1 2
1 3
1 4
2 3
2 5
2 6
2 7
3 4
3 7
4 7
5 6
12
2 4 0 3
2 4 1 5
2 4 1 6
2 4 1 7
2 4 0 6
0 6 4 5
3 6 7 0
3 5 1 6
5 7 6 3
0 7 6 1
4 5 6 7
0 7 6 4
\end{lstlisting}

\columnbreak

\textbf{Sample output 1:}
\begin{lstlisting}
YES
YES
YES
YES
YES
YES
YES
YES
YES
YES
YES
YES
\end{lstlisting}
\end{multicols}

\newpage

\begin{multicols}{2}
    
\textbf{Sample input 2:}
\begin{lstlisting}
7 16
0 2
0 3
0 4
0 5
0 6
1 2
1 3
1 4
1 5
1 6
2 3
2 4
2 5
2 6
3 6
4 6
9
0 1 1 0
0 1 3 4
0 1 4 5
0 1 5 6
0 1 6 5
1 0 3 5
3 4 5 6
4 3 6 5
4 5 5 6
\end{lstlisting}

\columnbreak

\textbf{Sample output 2:}
\begin{lstlisting}
YES
NO
NO
NO
NO
NO
YES
YES
YES
\end{lstlisting}
\end{multicols}

\end{document}
